<!DOCTYPE html>

<html layout:decorator="layout/layout" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<div class="row" th:fragment="form(postAdminForm)">
    <form action="#" th:action="@{/admin/post/save/} + *{id}" th:object="${postAdminForm}" method="post">
        <div class="col-lg-12">
            <div class="form-group">
                <label for="title">Post Title</label>
                <input type="text" id="title" name="title" th:field="*{title}" class="form-control" placeholder="* Post Title"/>
                <div th:if="${#fields.hasErrors('title')}" th:errors="*{title}" class="alert alert-danger margintop10"></div>
            </div>
            <div class="form-group">
                <label for="value">Post Content</label>
                <textarea rows="12" id="value" name="value" th:field="*{value}" class="form-control" placeholder="* Post Content"></textarea>
                <div th:if="${#fields.hasErrors('value')}" th:errors="*{value}" class="alert alert-danger margintop10"></div>
            </div>
            <div class="form-group">
                <label for="tagIds">Tag Id's</label>
                <input type="text" id="tagIds" name="tagIds" th:field="*{tagIds}" class="form-control" placeholder="Tag Ids"/>
            </div>
            <div class="form-group">
                <label for="status">Status</label>
                <select id="status" name="status" th:field="*{status}">
                    <option value="INACTIVE">INACTIVE</option>
                    <option value="ACTIVE">ACTIVE</option>
                </select>
            </div>
            <div class="form-group">
                <input class="btn btn-theme pull-left" type="submit" onclick="return submitClick();" />
                <div th:if="${postAdminForm.id != 0}" th:remove="tag">
                    <a class="btn btn-theme pull-right" th:href="@{/admin/post/delete/} + ${postAdminForm.id}">Delete Post</a>
                </div>
            </div>
        </div>

        <div id="editormd">
            <textarea name="editormd-md" style="display: none;"></textarea>
        </div>

    </form>

    <div class="col-lg-12">
        <h4>Preview</h4>
        <span id="sn-value"></span>
    </div>
    <script>
        // after markdown implementation, this wont be needed
        $(document).ready(function () {
            $('#value').keyup(function () {
                $('#sn-value').html($(this).val());
            })
        })

        // initialize editormd markdown editor
        // html value will be in "#editormd > textarea.editormd-html-textarea"
        $(function () {
            editor = editormd({
                id: "editormd",
                width: "100%",
                height: 640,
                path: "/js/lib/",
                saveHTMLToTextarea: true
            });
        });
        function submitClick() {
            //$('#value').html($('.editormd-html-textarea').html());
            $('#value').html($('.editormd-markdown-textarea').html());
            //return false;
        }
    </script>

</div>

</html>
